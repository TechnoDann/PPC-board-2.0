<%# Expects the ID of the current post, if any, to be passed in `id`.
    `bodies` causes the bodies of the posts to be displayed when true.
    Pass a hash generated by `.arrange`. `subthread` is internal-use
    only.  %>
<% subthread ||= false %>
<% for post, subthreads in thread do %>
<% unless subthread %>
<div class="thread row-fluid">
<% end %>
<div class="<%= (post.id == id) ? 'post current-post' : 'post' %>">
<%= link_to post.subject, post %> by <%= post.author %> at <%= post.created_at %> 
<%= link_to 'Edit', edit_post_path(post) %>
<%= link_to 'Destroy', post, method: :delete, data: { confirm:
        'Are you sure?' } %>
<% if bodies %>
<br />
<%= post.body %>
<% end %>
</div>
<div class="subthread">
<%= render :partial => 'thread',
      :locals => { :bodies => bodies, :id => id, :subthread => true }, 
      :object => subthreads %>
</div> 
<% unless subthread %>
</div>
<% end %>
<% end %>
